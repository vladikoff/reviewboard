{% extends "admin/base_site.html" %}
{% load adminmedia %}
{% load rbadmintags %}
{% load i18n %}
{% load log %}

{% block coltype %}colM{% endblock %}
{% block bodyclass %}dashboard{% endblock %}
{% block breadcrumbs %}{% endblock %}

{% block extrahead %}
<script type="text/javascript" src="{{MEDIA_URL}}djblets/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}rb/js/flot/jquery.flot.min.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}rb/js/flot/jquery.flot.pie.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}rb/js/admin.js"></script>


<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}rb/css/admin-dashboard.css?{{MEDIA_SERIAL}}" />
<style>


@media screen and (max-width: 1230px) {
 .admin-extras-level-2{
  width: 100%;
  margin: 20px 0px 0px 20px;

 }

 .admin-extras-level-2 .widget-small {
  float: left;
  margin-right: 35px;
 }

 .admin-extras-level-2 .widget-last {
  margin-right: 0px;
 }
}


@media screen and (max-width: 979px) {
.admin-extras{
 width: 100%;
 margin-right: 0px;
}

.admin-extras-level-2 {
 margin-left: 0px;
}

.admin-extras .widget-small {
 float: left;
 margin-right: 35px;
}

.admin-extras .widget-last {
 margin-right: 0px;
}
   }


</style>
{% endblock %}

{% block content %}
{% include "base/base_header.html" %}

 <p>Viewport size is <span id="vpWidth"></span> x <span id="vpHeight"></span></p>
    <script>
	function getViewportSize () {
		document.getElementById('vpWidth').innerHTML = window.innerWidth;
		document.getElementById('vpHeight').innerHTML = window.innerHeight;
	}
	getViewportSize ();
	window.onresize = function(){getViewportSize()};

	</script> 
<!-- New Stuff -->
<div id="admin-dashboard" class="clear">

 <div id="dashboard-nav">
  <ul class="admin-menu">
      <li class="nav-first"><a href="{% url reviewboard.admin.views.dashboard %}">{% trans "Dashboard" %}</a></li>
      <li><a href="{% url reviewboard.admin.views.dashboard %}db/">{% trans "Database" %}</a></li>
      <li><a href="{% url site-settings %}">{% trans "Settings" %}</a></li>
  </ul>
  <div class="admin-title">Review Board Admin
   <img src="{{MEDIA_URL}}rb/images/admin/gears.png?{{MEDIA_SERIAL}}"
     alt="Review Board Admin" />
  </div>

 </div>

 <div class="dashboard-alert-wrap">
  <div class="dashboard-alert">
   <a href="#" class="close-alert"><img src="{{MEDIA_URL}}rb/images/delete.png?{{MEDIA_SERIAL}}"
    alt="Close Alert" title="Close Alert" width="14" height="14" /></a>
   <p><strong>Welcome to Review Board Administration!</strong></p>
   <p>This is your first time using the admin panel.</p>
   <p>Enjoy Review Board!</p>
  </div>
 </div>


 <div id="dashboard-view">
     <!-- Action Bar -->
     <div id="admin-actions" class="clear">

      <div class="admin-widget admin-sidebar">
       <h1 class="widget-heading">{% trans "Manage" %}</h1>
       <div class="widget-content admin-box action-box">
        <table summary="{% trans "Common management operations." %}">
         <tbody>
          <tr>
           <th scope="row"><a href="db/auth/user/">{% trans "Users" %}</a>
            <span class="count">({{user_count}})</span></th>
           <td><a class="addlink" href="db/auth/user/add/">{% trans "Add" %}</a></td>
          </tr>
          <tr>
            <th scope="row"><a href="db/reviews/group/">{% trans "Review Groups" %}</a>
             <span class="count">({{reviewgroup_count}})</span></th>
            <td><a class="addlink" href="db/reviews/group/add/">{% trans "Add" %}</a></td>
          </tr>
          <tr>
            <th scope="row"><a href="db/reviews/defaultreviewer/">{% trans "Default Reviewers" %}</a>
             <span class="count">({{defaultreviewer_count}})</span></th>
            <td><a class="addlink" href="db/reviews/defaultreviewer/add/">{% trans "Add" %}</a></td>
          </tr>
          <tr>
             <th scope="row"><a href="db/scmtools/repository/">{% trans "Repositories" %}</a>
              <span class="count">({{repository_count}})</span></th>
             <td><a class="addlink" href="db/scmtools/repository/add/">{% trans "Add" %}</a></td>
          </tr>
         </tbody>
        </table>
       </div>
      </div>



      <!-- Single Widget - Small -->
      <div class="admin-widget admin-sidebar">
       <h1 class="widget-heading">{% trans "System Settings" %}</h1>
       <div class="widget-content">
           <ul>
            {% admin_subnav "settings-general" _("General") "rb/images/reviewrequest.png" %}
            {% admin_subnav "settings-authentication" _("Authentication") "rb/images/admin/set-auth.png" %}
            {% admin_subnav "settings-email" _("E-Mail") "rb/images/admin/set-email.png" %}
            {% admin_subnav "settings-diffs" _("Diff Viewer") "rb/images/admin/set-diff.png" %}
            {% admin_subnav "settings-logging" _("Logging") "rb/images/admin/set-log.png" %}
            {% admin_subnav "settings-ssh" _("SSH") "rb/images/admin/set-ssh.png" %}
            {% admin_subnav "settings-storage" _("File Storage") "rb/images/admin/set-storage.png" %}
           </ul>
       </div>
      </div>
      <!-- Single Widget Small -->




      <div class="admin-widget admin-sidebar">
       <h1 class="widget-heading">System Information</h1>
       <div class="widget-content admin-box action-box">
        <ul>
         <li><a href="cache/">{% trans "Server Cache" %}</a></li>
         <li>
          {% if settings.LOGGING_ENABLED and settings.LOGGING_DIRECTORY %}
           <a href="{% url server-log %}">
               <img alt="" src="{{MEDIA_URL}}rb/images/admin/set-log.png?{{MEDIA_SERIAL}}">
               {% trans "Server Log" %}
           </a>
          {% endif %}
         </li>
         <li class="t-align-r">Version - {{version}}</li>
        </ul>
       </div>
      </div>




     </div>
     <!-- Action Bar End -->
     <!-- Widgets -->
     <div id="admin-widgets">

      <!-- Single Widget - Large -->
      <div class="admin-widget widget-large">
       <h1 class="widget-heading">Review Requests</h1>
       <div class="widget-content">

           <!-- Place Holder -->
           <div id="placeholder" style="width: 450px; height: 200px;"></div>

       </div>
       <div class="widget-actions">
        <a class="a-right" href="">View All</a>
        <a class="a-right" href="">View Drafts</a>
       </div>
      </div>
      <!-- Single Widget - Large End -->

      <!-- Single Widget - Large -->
      <div class="admin-widget widget-large">
       <h1 class="widget-heading">Repositories</h1>
       <div class="widget-content">
        <table class="widget-large-table">
        <thead>
            <tr><th>Name</th><th>Tool</th><th>Visible</th></tr>
        </thead>
        {% if repositories %}
           {% for repo in repositories %}
            <tr>
             <td><a href="">{{repo.name}}</a></td>
             <td>{{repo.tool}}</td>
             <td>{% if repo.visible %}
              <img src="{{MEDIA_URL}}rb/images/shipit.png?{{MEDIA_SERIAL}}" alt="Visible" title="Visible" />{% endif %}
             </td>
            </tr>
           {% endfor %}
        {% endif %}
        </table>
       </div>
       <div class="widget-actions">
        <a href="db/scmtools/repository/add/">Add New</a>
        <a class="a-right" href="db/scmtools/repository/">View All</a>
       </div>
      </div>
      <!-- Single Widget - Large End -->

      <!-- Single Widget - Large -->
      <div class="admin-widget widget-large">
       <h1 class="widget-heading">Users</h1>
       <div class="widget-content">
        <div id="user-chart" style="width: 450px; height: 150px;"></div>

         {% for user in users %}
             {{user}}
             last login: {{ user.last_login }}<br/>
         {% endfor %}
       </div>
       <div class="widget-actions">
        <a href="">Add New</a>
        <a class="a-right" href="">Manage Users</a>
       </div>
      </div>
      <!-- Single Widget - Large End -->




     </div>


     <div class="admin-extras">

      <div class="admin-widget widget-small">
       <h1 class="widget-heading">Server Cache
        <a href=""><img src="{{MEDIA_URL}}rb/images/admin/set-storage.png?{{MEDIA_SERIAL}}"
         alt="Groups" width="20" height="20" /></a></h1>
       <div class="widget-content admin-box action-box">
        <div id="placeholder4" style="width: 180px; height: 200px;"></div>
       </div>
      </div>



      <div class="admin-widget widget-small">
       <h1 class="widget-heading">Recent Actions</h1>
       <div class="widget-content admin-box action-box">
        <div id="placeholder5" style="width: 180px; height: 200px;"></div>
       </div>
      </div>



      <div class="admin-widget widget-small">
       <h1 class="widget-heading">Groups
        <a href=""><img src="{{MEDIA_URL}}rb/images/admin/set-auth.png?{{MEDIA_SERIAL}}"
         alt="Groups" width="20" height="20" /></a></h1>
       <div class="widget-content admin-box action-box">
           <ul class="widget-list">
               <li>Group Name :: <strong>0</strong></li>
               <li>SampleGroup Name :: <strong>0</strong></li>
               <li>Group Name :: <strong>0</strong></li>
               <li>Administrators Group :: <strong>0</strong></li>
           </ul>
       </div>
       <div class="widget-actions">
        <a href="">Add New</a>
        <a href="">{% trans "View All" %}</a>
       </div>
      </div>


      <!-- Single Widget - Small -->
      <div class="admin-widget widget-small">
       <h1 class="widget-heading">Review Board News<a href="feed/news/rss/">
       <img src="{{MEDIA_URL}}rb/images/rss.png?{{MEDIA_SERIAL}}" alt="RSS" width="14" height="14" /></a></h1>

       <div class="widget-content" id="news-content-widget">
        <img src="{{MEDIA_URL}}rb/images/spinner.gif?{{MEDIA_SERIAL}}"
	     class="loading-indicator" width="16" height="16" border="0" alt="" />
	    {% trans "Loading..." %}
       </div>
       <div class="widget-actions">
        <a href="http://www.reviewboard.org/news/">More News</a>
        <a href="" id="reload-news">{% trans "Reload" %}</a>
       </div>
      </div>
      <!-- Single Widget Small -->

     </div><!-- Admin Extras End -->
     <!-- Widgets End -->
    </div>
 </div>
<br class="clear" />
{% endblock %}